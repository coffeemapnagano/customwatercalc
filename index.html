<!DOCTYPE html>
<html lang="ja">
<head>
    <meta name="google-site-verification" content="usiyev1Tl8IkzSyeCunyQ0U3LcxUT0opfdeojCezvpk" />
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>カスタムウォーター計算サイト</title>
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        coffee: {
                            50: '#fdf8f6',
                            100: '#f2e8e5',
                            200: '#eaddd7',
                            800: '#4a4036',
                            900: '#2b2623',
                        }
                    },
                    fontFamily: {
                        sans: ['"Noto Sans JP"', 'sans-serif'],
                    },
                    boxShadow: {
                        'soft': '0 4px 20px -2px rgba(0, 0, 0, 0.05)',
                        'inner-light': 'inset 0 2px 4px 0 rgba(0, 0, 0, 0.02)',
                    }
                }
            }
        }
    </script>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Noto Sans JP', sans-serif;
            background-color: #fcfbf9;
            color: #44403c;
            -webkit-tap-highlight-color: transparent; /* タップ時のハイライトを無効化 */
        }

        /* カスタムスライダー (モバイル最適化) */
        input[type=range] {
            -webkit-appearance: none;
            background: transparent;
            touch-action: manipulation; /* スクロールとスライダー操作の干渉を防ぐ */
        }
        
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            height: 28px; /* スマホで操作しやすいようにサイズアップ */
            width: 28px;
            border-radius: 50%;
            background: #ffffff;
            border: 1px solid #d6d3d1;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1), 0 2px 4px rgba(0,0,0,0.06);
            cursor: pointer;
            margin-top: -12px;
            transition: transform 0.1s;
        }

        input[type=range]::-webkit-slider-thumb:active {
            transform: scale(1.1);
            background: #fafaf9;
            border-color: #a8a29e;
        }

        input[type=range]::-webkit-slider-runnable-track {
            width: 100%;
            height: 6px; /* トラックも少し太く */
            cursor: pointer;
            background: #e7e5e4;
            border-radius: 9999px;
        }
        
        /* Firefox用 */
        input[type=range]::-moz-range-thumb {
            height: 28px;
            width: 28px;
            border: 1px solid #d6d3d1;
            border-radius: 50%;
            background: #ffffff;
            cursor: pointer;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        /* ガイド用スクロールバー */
        .custom-scrollbar::-webkit-scrollbar {
            width: 4px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: transparent;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background-color: #d6d3d1;
            border-radius: 20px;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- Icons ---
        const IconBase = ({ size = 24, className = "", children, ...props }) => (
            <svg 
                xmlns="http://www.w3.org/2000/svg" 
                width={size} 
                height={size} 
                viewBox="0 0 24 24" 
                fill="none" 
                stroke="currentColor" 
                strokeWidth="1.5"
                strokeLinecap="round" 
                strokeLinejoin="round" 
                className={className} 
                {...props}
            >
                {children}
            </svg>
        );

        const Droplet = (props) => (
            <IconBase {...props}>
                <path d="M12 22a7 7 0 0 0 7-7c0-2-2-3-2-3L12 2 7 12s-2 1-2 3a7 7 0 0 0 7 7z" />
            </IconBase>
        );

        const Beaker = (props) => (
            <IconBase {...props}>
                <path d="M4.5 3h15" />
                <path d="M6 3v16a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V3" />
                <path d="M6 14h12" />
            </IconBase>
        );

        const Info = (props) => (
            <IconBase {...props}>
                <circle cx="12" cy="12" r="10" />
                <path d="M12 16v-4" />
                <path d="M12 8h.01" />
            </IconBase>
        );

        const Coffee = (props) => (
            <IconBase {...props}>
                <path d="M17 8h1a4 4 0 1 1 0 8h-1" />
                <path d="M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z" />
                <line x1="6" y1="1" x2="6" y2="4" />
                <line x1="10" y1="1" x2="10" y2="4" />
                <line x1="14" y1="1" x2="14" y2="4" />
            </IconBase>
        );

        const RefreshCw = (props) => (
            <IconBase {...props}>
                <path d="M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8" />
                <path d="M3 3v5h5" />
                <path d="M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16" />
                <path d="M16 21h5v-5" />
            </IconBase>
        );

        const XIcon = (props) => (
            <IconBase {...props}>
                <path d="M18 6 6 18" />
                <path d="m6 6 12 12" />
            </IconBase>
        );

        // プリセットレシピ (MgとCaに分割)
        // GHは基本的に Mg + Ca として扱われるが、プリセットではバランスを定義
        const PRESETS = [
            { name: "Barista Hustle", mg: 80, ca: 0, kh: 40, desc: "BH標準 (Mgのみ)" },
            { name: "Melbourne", mg: 24, ca: 0, kh: 11, desc: "メルボルンの水質 (軟水バランス)" },
        ];

        const App = () => {
            const [totalVolume, setTotalVolume] = useState(1000); 
            const [targetMg, setTargetMg] = useState(68); // 旧GHスライダー
            const [targetCa, setTargetCa] = useState(0);  // 新設
            const [targetKH, setTargetKH] = useState(40); 
            const [showGuide, setShowGuide] = useState(false);

            // 計算ロジック
            // 原液1gを1Lに溶かすと各成分が1ppm上昇する設計
            const calculateRecipe = () => {
                const volumeL = totalVolume / 1000;
                
                const mgSolutionNeeded = targetMg * volumeL;
                const caSolutionNeeded = targetCa * volumeL;
                const khSolutionNeeded = targetKH * volumeL;
                
                const distilledWaterNeeded = totalVolume - mgSolutionNeeded - caSolutionNeeded - khSolutionNeeded;

                return {
                    mg: parseFloat(mgSolutionNeeded.toFixed(1)),
                    ca: parseFloat(caSolutionNeeded.toFixed(1)),
                    kh: parseFloat(khSolutionNeeded.toFixed(1)),
                    water: parseFloat(distilledWaterNeeded.toFixed(1))
                };
            };

            const result = calculateRecipe();
            const totalGH = targetMg + targetCa;

            const applyPreset = (preset) => {
                setTargetMg(preset.mg);
                setTargetCa(preset.ca);
                setTargetKH(preset.kh);
            };

            return (
                <div className="min-h-screen flex flex-col text-stone-600 pb-16 selection:bg-stone-200 selection:text-stone-800">
                    {/* Header */}
                    <header className="sticky top-0 z-20 backdrop-blur-md bg-white/80 border-b border-stone-100/50 supports-[backdrop-filter]:bg-white/60">
                        <div className="max-w-4xl mx-auto px-4 md:px-6 py-3 md:py-4 flex items-center justify-between">
                            <div className="flex items-center gap-2.5">
                                <div className="bg-stone-800 text-stone-50 p-1.5 md:p-2 rounded-lg shadow-sm">
                                    <Droplet size={18} className="md:w-6 md:h-6" />
                                </div>
                                <h1 className="text-base md:text-lg font-bold text-stone-800 tracking-tight leading-none">Custom Water Calc</h1>
                            </div>
                            <button 
                                onClick={() => setShowGuide(!showGuide)}
                                className="text-xs md:text-sm flex items-center gap-1.5 md:gap-2 px-3 py-1.5 rounded-full bg-stone-100 text-stone-500 hover:text-stone-800 hover:bg-stone-200 transition-all font-medium active:scale-95"
                            >
                                <Info size={16} />
                                <span>原液レシピ</span>
                            </button>
                        </div>
                    </header>

                    <main className="flex-grow max-w-4xl mx-auto w-full px-4 md:px-6 py-6 md:py-8 space-y-8 md:space-y-10">
                        
                        {/* Intro */}
                        <div className="text-center space-y-1.5 py-1">
                            <h2 className="text-xl md:text-3xl font-bold text-stone-800 tracking-tight">Anything for coffee.</h2>
                            <p className="text-stone-500 text-xs md:text-base max-w-lg mx-auto leading-relaxed px-4">
                                硬度GH(Mg/Ca)とアルカリ度KHを調整し、カスタムウォーターを作成。
                            </p>
                        </div>

                        {/* Presets */}
                        <section>
                            <div className="flex items-center justify-center mb-3 md:mb-4">
                                <span className="text-[10px] uppercase tracking-[0.2em] text-stone-400 font-bold">Presets</span>
                            </div>
                            <div className="grid grid-cols-2 xs:grid-cols-4 gap-2 md:gap-4 max-w-3xl mx-auto">
                                {PRESETS.map((preset) => {
                                    const isActive = targetMg === preset.mg && targetCa === preset.ca && targetKH === preset.kh;
                                    return (
                                        <button
                                            key={preset.name}
                                            onClick={() => applyPreset(preset)}
                                            className={`
                                                group relative flex flex-col items-center justify-center p-2.5 md:p-4 rounded-xl transition-all duration-300 touch-manipulation
                                                ${isActive 
                                                    ? 'bg-white shadow-md text-stone-800 ring-1 ring-stone-200' 
                                                    : 'bg-stone-100/50 md:bg-transparent hover:bg-white/50 text-stone-400 hover:text-stone-600'
                                                }
                                            `}
                                        >
                                            <span className={`text-[11px] md:text-sm font-bold mb-1 leading-tight text-center ${isActive ? 'text-stone-800' : 'text-stone-500'}`}>
                                                {preset.name}
                                            </span>
                                            <div className="flex gap-1.5 text-[9px] md:text-[10px] opacity-80 flex-wrap justify-center">
                                                <span className={isActive ? 'text-teal-700 font-medium' : ''}>Mg:{preset.mg}</span>
                                                <span className={isActive ? 'text-amber-700 font-medium' : ''}>Ca:{preset.ca}</span>
                                                <span className={isActive ? 'text-amber-700 font-medium' : ''}>KH:{preset.kh}</span>
                                            </div>
                                            {isActive && (
                                                <div className="absolute -bottom-1 w-1 h-1 bg-stone-800 rounded-full"></div>
                                            )}
                                        </button>
                                    );
                                })}
                            </div>
                        </section>

                        <div className="grid lg:grid-cols-12 gap-6 md:gap-8 items-start">
                            {/* Input Section */}
                            <section className="lg:col-span-7 bg-white rounded-2xl md:rounded-3xl shadow-soft p-5 md:p-8 space-y-8 md:space-y-10 border border-stone-100">
                                
                                {/* Total Volume */}
                                <div className="space-y-4">
                                    <div className="flex justify-between items-end">
                                        <label className="text-sm font-bold text-stone-700 flex items-center gap-2">
                                            <div className="p-1.5 bg-stone-100 rounded-md text-stone-600">
                                                <Beaker size={16} />
                                            </div>
                                            作成する総量
                                        </label>
                                        <div className="text-right">
                                            <span className="text-2xl md:text-3xl font-bold text-stone-800 tabular-nums">{totalVolume}</span>
                                            <span className="text-xs text-stone-400 font-medium ml-1">ml</span>
                                        </div>
                                    </div>
                                    <div className="relative pt-2 px-1">
                                        <input 
                                            type="range" min="100" max="5000" step="10"
                                            value={totalVolume}
                                            onChange={(e) => setTotalVolume(Number(e.target.value))}
                                            className="w-full relative z-10"
                                        />
                                        <div className="flex justify-between text-[10px] text-stone-400 mt-2 font-medium tracking-wide px-1">
                                            <span>100ml</span>
                                            <span>2500ml</span>
                                            <span>5000ml</span>
                                        </div>
                                    </div>
                                </div>

                                <div className="h-px bg-stone-100 w-full"></div>

                                {/* Mg Slider */}
                                <div className="space-y-4">
                                    <div className="flex justify-between items-start">
                                        <div>
                                            <label className="text-sm font-bold text-stone-700 flex items-center gap-2 mb-1">
                                                <span className="w-2.5 h-2.5 rounded-full bg-teal-600 shadow-sm"></span>
                                                Magnesium (Mg)
                                            </label>
                                            <p className="text-[10px] md:text-[11px] text-stone-400 pl-5">フルーティーさ、甘さ、酸味の明確化</p>
                                        </div>
                                        <div className="text-right">
                                            <span className="text-2xl md:text-3xl font-bold text-teal-800 tabular-nums">{targetMg}</span>
                                            <span className="text-xs text-stone-400 font-medium ml-1">ppm</span>
                                        </div>
                                    </div>
                                    <div className="relative pt-2 px-1">
                                        <input 
                                            type="range" min="0" max="200" step="1"
                                            value={targetMg}
                                            onChange={(e) => setTargetMg(Number(e.target.value))}
                                            className="w-full relative z-10"
                                            style={{
                                                background: `linear-gradient(to right, #0d9488 0%, #0d9488 ${(targetMg/200)*100}%, #e7e5e4 ${(targetMg/200)*100}%, #e7e5e4 100%)`,
                                                height: '6px',
                                                borderRadius: '99px',
                                                appearance: 'none'
                                            }} 
                                        />
                                    </div>
                                </div>

                                {/* Calcium Slider (New) */}
                                <div className="space-y-4">
                                    <div className="flex justify-between items-start">
                                        <div>
                                            <label className="text-sm font-bold text-stone-700 flex items-center gap-2 mb-1">
                                                <span className="w-2.5 h-2.5 rounded-full bg-amber-500 shadow-sm"></span>
                                                Calcium (Ca)
                                            </label>
                                            <p className="text-[10px] md:text-[11px] text-stone-400 pl-5">ボディ感、クリーム感、質感の向上</p>
                                        </div>
                                        <div className="text-right">
                                            <span className="text-2xl md:text-3xl font-bold text-amber-800 tabular-nums">{targetCa}</span>
                                            <span className="text-xs text-stone-400 font-medium ml-1">ppm</span>
                                        </div>
                                    </div>
                                    <div className="relative pt-2 px-1">
                                        <input 
                                            type="range" min="0" max="200" step="1"
                                            value={targetCa}
                                            onChange={(e) => setTargetCa(Number(e.target.value))}
                                            className="w-full relative z-10"
                                            style={{
                                                background: `linear-gradient(to right, #f59e0b 0%, #f59e0b ${(targetCa/200)*100}%, #e7e5e4 ${(targetCa/200)*100}%, #e7e5e4 100%)`,
                                                height: '6px',
                                                borderRadius: '99px',
                                                appearance: 'none'
                                            }}
                                        />
                                    </div>
                                </div>

                                {/* KH Slider */}
                                <div className="space-y-4">
                                    <div className="flex justify-between items-start">
                                        <div>
                                            <label className="text-sm font-bold text-stone-700 flex items-center gap-2 mb-1">
                                                <span className="w-2.5 h-2.5 rounded-full bg-blue-600 shadow-sm"></span>
                                                Alkalinity (KH)
                                            </label>
                                            <p className="text-[10px] md:text-[11px] text-stone-400 pl-5">酸味の緩和、バッファー効果 (Buffer)</p>
                                        </div>
                                        <div className="text-right">
                                            <span className="text-2xl md:text-3xl font-bold text-blue-800 tabular-nums">{targetKH}</span>
                                            <span className="text-xs text-stone-400 font-medium ml-1">ppm</span>
                                        </div>
                                    </div>
                                    <div className="relative pt-2 px-1">
                                        <input 
                                            type="range" min="0" max="150" step="1"
                                            value={targetKH}
                                            onChange={(e) => setTargetKH(Number(e.target.value))}
                                            className="w-full relative z-10"
                                            style={{
                                                background: `linear-gradient(to right, #475569 0%, #475569 ${(targetKH/150)*100}%, #e7e5e4 ${(targetKH/150)*100}%, #e7e5e4 100%)`,
                                                height: '6px',
                                                borderRadius: '99px',
                                                appearance: 'none'
                                            }}
                                        />
                                    </div>
                                </div>
                            </section>

                            {/* Result Section */}
                            <section className="lg:col-span-5 space-y-6">
                                {/* Result Card */}
                                <div className="bg-[#4a4036] text-stone-50 rounded-2xl md:rounded-3xl p-6 md:p-8 shadow-xl relative overflow-hidden border border-[#5c5044]">
                                    
                                    {/* 背景装飾 */}
                                    <div className="absolute -top-10 -right-10 opacity-[0.03] text-white pointer-events-none">
                                        <RefreshCw size={200} />
                                    </div>
                                    
                                    <div className="relative z-10">
                                        <h3 className="text-[#a8a29e] text-[10px] font-bold uppercase tracking-[0.2em] mb-6 md:mb-8 flex items-center gap-2">
                                            <span className="w-4 h-px bg-[#a8a29e]"></span>
                                            Recipe
                                        </h3>
                                        
                                        <div className="space-y-4 md:space-y-6">
                                            {/* Mg Result */}
                                            <div className="flex items-center justify-between group bg-white/5 rounded-xl p-3 md:bg-transparent md:p-0 border border-white/5 md:border-none">
                                                <div className="mb-0.5">
                                                    <p className="text-xs text-[#d6d3d1] font-medium tracking-wide mb-0.5 flex items-center gap-2">
                                                        <span className="w-2 h-2 rounded-full bg-teal-500 md:hidden"></span>
                                                        Mg Solution
                                                    </p>
                                                    <p className="text-[10px] text-[#a8a29e] hidden md:block">硬度成分 (Magnesium)</p>
                                                </div>
                                                <div className="flex items-baseline gap-1">
                                                    <span className="text-3xl md:text-4xl font-bold text-[#f5f5f4] tabular-nums tracking-tight group-hover:text-teal-200 transition-colors duration-300">
                                                        {result.mg}
                                                    </span>
                                                    <span className="text-xs md:text-sm text-[#a8a29e]">g</span>
                                                </div>
                                            </div>

                                            {/* Ca Result */}
                                            <div className="flex items-center justify-between group bg-white/5 rounded-xl p-3 md:bg-transparent md:p-0 border border-white/5 md:border-none">
                                                <div className="mb-0.5">
                                                    <p className="text-xs text-[#d6d3d1] font-medium tracking-wide mb-0.5 flex items-center gap-2">
                                                        <span className="w-2 h-2 rounded-full bg-amber-500 md:hidden"></span>
                                                        Ca Solution
                                                    </p>
                                                    <p className="text-[10px] text-[#a8a29e] hidden md:block">硬度成分 (Calcium)</p>
                                                </div>
                                                <div className="flex items-baseline gap-1">
                                                    <span className="text-3xl md:text-4xl font-bold text-[#f5f5f4] tabular-nums tracking-tight group-hover:text-amber-200 transition-colors duration-300">
                                                        {result.ca}
                                                    </span>
                                                    <span className="text-xs md:text-sm text-[#a8a29e]">g</span>
                                                </div>
                                            </div>

                                            {/* KH Result */}
                                            <div className="flex items-center justify-between group bg-white/5 rounded-xl p-3 md:bg-transparent md:p-0 border border-white/5 md:border-none">
                                                <div className="mb-0.5">
                                                    <p className="text-xs text-[#d6d3d1] font-medium tracking-wide mb-0.5 flex items-center gap-2">
                                                        <span className="w-2 h-2 rounded-full bg-slate-500 md:hidden"></span>
                                                        KH Solution
                                                    </p>
                                                    <p className="text-[10px] text-[#a8a29e] hidden md:block">緩衝成分 (Buffer)</p>
                                                </div>
                                                <div className="flex items-baseline gap-1">
                                                    <span className="text-3xl md:text-4xl font-bold text-[#f5f5f4] tabular-nums tracking-tight group-hover:text-blue-200 transition-colors duration-300">
                                                        {result.kh}
                                                    </span>
                                                    <span className="text-xs md:text-sm text-[#a8a29e]">g</span>
                                                </div>
                                            </div>

                                            {/* Divider */}
                                            <div className="h-px bg-white/10 w-full hidden md:block"></div>

                                            {/* Water Result */}
                                            <div className="flex items-center justify-between bg-stone-900/20 rounded-xl p-3 md:bg-transparent md:p-0 border border-stone-900/10 md:border-none">
                                                <div className="mb-0.5">
                                                    <p className="text-xs text-[#d6d3d1] font-medium tracking-wide mb-0.5">Purified Water</p>
                                                    <p className="text-[10px] text-[#a8a29e] hidden md:block">精製水</p>
                                                </div>
                                                <div className="flex items-baseline gap-1">
                                                    <span className="text-3xl md:text-4xl font-bold text-white tabular-nums tracking-tight">
                                                        {result.water}
                                                    </span>
                                                    <span className="text-xs md:text-sm text-[#a8a29e]">g</span>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div className="mt-6 md:mt-8 pt-4 border-t border-white/5 text-center flex justify-between items-center text-[10px] text-[#a8a29e]">
                                            <span>TARGET: {totalVolume}g</span>
                                            <span>Total GH:{totalGH} / KH:{targetKH}</span>
                                        </div>
                                    </div>
                                </div>

                                {/* Instructions */}
                                <div className="bg-white p-5 md:p-8 rounded-2xl md:rounded-3xl border border-stone-100 shadow-soft">
                                    <h4 className="font-bold mb-4 md:mb-6 flex items-center gap-2 text-stone-700 text-sm">
                                        <Coffee size={18} className="text-stone-400" />
                                        作成ステップ
                                    </h4>
                                    <div className="relative pl-2">
                                        {/* 縦線 */}
                                        <div className="absolute left-[15px] top-2 bottom-2 w-px bg-stone-100"></div>
                                        
                                        <ul className="space-y-4 md:space-y-6 relative">
                                            <li className="flex gap-4 items-start text-xs md:text-sm text-stone-600">
                                                <span className="shrink-0 w-4 h-4 rounded-full bg-stone-100 border border-stone-200 flex items-center justify-center text-[8px] font-bold text-stone-500 relative z-10 mt-0.5">1</span>
                                                <span>ケトルをスケールに乗せ計測開始</span>
                                            </li>
                                            <li className="flex gap-4 items-start text-xs md:text-sm text-stone-600">
                                                <span className="shrink-0 w-4 h-4 rounded-full bg-teal-50 border border-teal-100 flex items-center justify-center text-[8px] font-bold text-teal-600 relative z-10 mt-0.5">2</span>
                                                <span>Mg原液 <span className="font-bold text-stone-800 bg-teal-50 px-1 rounded">{result.mg}g</span> を加える。</span>
                                            </li>
                                            <li className="flex gap-4 items-start text-xs md:text-sm text-stone-600">
                                                <span className="shrink-0 w-4 h-4 rounded-full bg-amber-50 border border-amber-100 flex items-center justify-center text-[8px] font-bold text-amber-600 relative z-10 mt-0.5">3</span>
                                                <span>Ca原液 <span className="font-bold text-stone-800 bg-amber-50 px-1 rounded">{result.ca}g</span> を加える。</span>
                                            </li>
                                            <li className="flex gap-4 items-start text-xs md:text-sm text-stone-600">
                                                <span className="shrink-0 w-4 h-4 rounded-full bg-blue-50 border border-blue-100 flex items-center justify-center text-[8px] font-bold text-blue-600 relative z-10 mt-0.5">4</span>
                                                <span>KH原液 <span className="font-bold text-stone-800 bg-blue-50 px-1 rounded">{result.kh}g</span> を加える。</span>
                                            </li>
                                            <li className="flex gap-4 items-start text-xs md:text-sm text-stone-600">
                                                <span className="shrink-0 w-4 h-4 rounded-full bg-stone-800 border border-stone-800 flex items-center justify-center text-[8px] font-bold text-white relative z-10 mt-0.5">5</span>
                                                <span>総量 <span className="font-bold text-stone-800 border-b border-stone-300">{totalVolume}g</span> まで精製水を注ぐ。</span>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </section>
                        </div>

                        {/* Guide Modal */}
                        {showGuide && (
                            <div 
                                className="fixed inset-0 bg-stone-900/40 backdrop-blur-sm z-50 flex items-center justify-center p-4 transition-opacity duration-300" 
                                onClick={() => setShowGuide(false)}
                            >
                                <div 
                                    className="bg-white rounded-2xl md:rounded-3xl max-w-lg w-full max-h-[85vh] overflow-hidden shadow-2xl flex flex-col scale-100 animate-[fadeIn_0.2s_ease-out]" 
                                    onClick={e => e.stopPropagation()}
                                >
                                    <div className="p-4 md:p-6 border-b border-stone-100 flex justify-between items-center bg-stone-50/50">
                                        <h3 className="text-base md:text-lg font-bold text-stone-800">原液のレシピ</h3>
                                        <button onClick={() => setShowGuide(false)} className="p-2 hover:bg-stone-200/50 rounded-full text-stone-400 hover:text-stone-600 transition">
                                            <XIcon size={18} />
                                        </button>
                                    </div>
                                    
                                    <div className="p-5 md:p-8 overflow-y-auto custom-scrollbar space-y-6 md:space-y-8">
                                        <p className="text-xs md:text-sm text-stone-500 leading-relaxed">
                                            各成分の原液（濃縮液）を予め作成し、ボトルに常備してください。これらを精製水で希釈して使用します。本サイトでは<strong className="text-stone-700">Barista Hustle</strong>様の情報を基に計算を行っております。感謝申し上げます。
                                        </p>

                                        {/* Mg Card */}
                                        <div className="relative overflow-hidden rounded-xl md:rounded-2xl border border-teal-100 bg-teal-50/30 p-4 md:p-6">
                                            <div className="flex items-center gap-3 mb-3 md:mb-4">
                                                <span className="flex items-center justify-center w-8 h-8 rounded-lg bg-teal-100 text-teal-700 font-bold text-xs">Mg</span>
                                                <h4 className="font-bold text-sm md:text-base text-stone-700">マグネシウム原液 (Mg)</h4>
                                            </div>
                                            <div className="space-y-3 text-xs md:text-sm text-stone-600">
                                                <div className="flex justify-between border-b border-teal-100/50 pb-2">
                                                    <span>用意するもの</span>
                                                    <span className="font-medium text-stone-800">エプソムソルト</span>
                                                </div>
                                                <div className="flex justify-between items-baseline">
                                                    <span>配合</span>
                                                    <div className="text-right">
                                                        <span className="font-bold text-base md:text-lg text-teal-700">2.45g</span>
                                                        <span className="text-[10px] md:text-xs text-stone-500 block">を1Lの水に溶かす</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        {/* Ca Card */}
                                        <div className="relative overflow-hidden rounded-xl md:rounded-2xl border border-amber-100 bg-amber-50/30 p-4 md:p-6">
                                            <div className="flex items-center gap-3 mb-3 md:mb-4">
                                                <span className="flex items-center justify-center w-8 h-8 rounded-lg bg-amber-100 text-amber-700 font-bold text-xs">Ca</span>
                                                <h4 className="font-bold text-sm md:text-base text-stone-700">カルシウム原液 (Ca)</h4>
                                            </div>
                                            <div className="space-y-3 text-xs md:text-sm text-stone-600">
                                                <div className="flex justify-between border-b border-amber-100/50 pb-2">
                                                    <span>用意するもの</span>
                                                    <span className="font-medium text-stone-800">塩化カルシウム(二水和物)</span>
                                                </div>
                                                <div className="flex justify-between items-baseline">
                                                    <span>配合</span>
                                                    <div className="text-right">
                                                        <span className="font-bold text-base md:text-lg text-amber-700">1.47g</span>
                                                        <span className="text-[10px] md:text-xs text-stone-500 block">を1Lの水に溶かす</span>
                                                    </div>
                                                </div>
                                                <p className="text-[10px] text-amber-800/60 mt-2">※ 無水物の場合は1.11gを使用</p>
                                            </div>
                                        </div>

                                        {/* KH Card */}
                                        <div className="relative overflow-hidden rounded-xl md:rounded-2xl border border-blue-100 bg-blue-50/30 p-4 md:p-6">
                                            <div className="flex items-center gap-3 mb-3 md:mb-4">
                                                <span className="flex items-center justify-center w-8 h-8 rounded-lg bg-slate-200 text-slate-600 font-bold text-xs">KH</span>
                                                <h4 className="font-bold text-sm md:text-base text-stone-700">アルカリ度原液 (KH)</h4>
                                            </div>
                                            <div className="space-y-3 text-xs md:text-sm text-stone-600">
                                                <div className="flex justify-between border-b border-blue-100/50 pb-2">
                                                    <span>用意するもの</span>
                                                    <span className="font-medium text-stone-800">重曹 (炭酸水素ナトリウム)</span>
                                                </div>
                                                <div className="flex justify-between items-baseline">
                                                    <span>配合</span>
                                                    <div className="text-right">
                                                        <span className="font-bold text-base md:text-lg text-slate-600">1.68g</span>
                                                        <span className="text-[10px] md:text-xs text-stone-500 block">を1Lの水に溶かす</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div className="p-4 border-t border-stone-100 bg-stone-50/30 safe-area-bottom">
                                        <button 
                                            onClick={() => setShowGuide(false)}
                                            className="w-full bg-stone-800 text-stone-50 py-3 rounded-xl font-bold hover:bg-stone-700 transition shadow-sm text-sm"
                                        >
                                            理解しました
                                        </button>
                                    </div>
                                </div>
                            </div>
                        )}
                    </main>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>

</html>


